<% conditions = params[:gender].present? %>
<div class="side-search-option singleton checkboxes_only" data-id="side_search_gender" data-type="Standard" data-value="<%= params[:gender] %>">
  <%= render "search/toggler" %>
  <div class="title"><%= t('.title') %></div>
  <div class="fields">
    <% Person::GENDER.each do |k, v| %>
      <% if params[:include_archived] %>
        <% count = Person.filter_by_gender(current_organization.all_people_with_archived, current_organization, v).collect(&:id).count %>
      <% else %>
        <% count = Person.filter_by_gender(current_organization.all_people, current_organization, v).collect(&:id).count %>
      <% end %>

      <%- active = conditions && params[:gender].include?("#{v}") %>
      <div class="option checkbox <%= 'active' if active %>">
        <%= check_box_tag "gender[]", "#{v}", active, id: "search_gender_#{v}", class: "search_gender_#{v}" %>
        <div class="sidebar-label"><%= k.titleize %></div>
        <span class="info">(<span class="count"><%= count %></span>)</span>
      </div>
    <% end %>
  </div>
</div>