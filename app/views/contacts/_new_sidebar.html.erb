<ul class="ac_dropdown_list">
	<li class="ac_dropdown_list_header">
    <a href="#" class="side_toggle arrow_anchor">&#x25B6;</a>
    <%= t('.contact_assignments')%>
  </li>
  <div id='leader_list' class="side_list" style="<%= 'display:block;' if params[:assigned_to].present? && params[:assigned_to] != 'friends' %>">
    <% @organization.leaders.each_with_index do |person| %>
      <% if params[:include_archived] %>
        <% count = person.assigned_contacts_limit_org_with_archived(@organization).collect(&:id).count %>
      <% else %>
        <% count = person.assigned_contacts_limit_org(@organization).collect(&:id).count %>
      <% end %>
      <li class="entry leader <%= 'selected_entry' if params[:assigned_to].to_i == person.id %>" data-id="<%= person.id %>" style="display:<%= count > 0 ? 'block' : 'none' %>">
        <% if params[:include_archived] %>
          <% link = all_contacts_path(assigned_to: person.id, include_archived: 'true') %>
        <% else %>
          <% link = all_contacts_path(assigned_to: person.id) %>
        <% end %>
        <%= link_to person, link %> (<span class="count"><%= count %></span>)
        <% if can? :manage, @organization %>
          <%= link_to(image_tag('delete.png'), leader_path(person.id), method: :delete, remote: true, class: 'delete_icon tip', title: 'Remove Leader', data: { confirm: t('general.remove_leader_confirm', person: person) }) %>
        <% end %>
      </li>
    <% end %>
  </div>
</ul>


<ul class="ac_dropdown_list">
	<li class="ac_dropdown_list_header">
    <a href="#" class="side_toggle arrow_anchor">&#x25B6;</a>
    <%= t('.labels')%>
  </li>
  <div id='label_list' class="side_list" style="<%= 'display:block;' if params[:label].present? %>">
    <% @organization.labels.arrange_all.each do |label| %>
      <% if params[:include_archived] %>
        <% count = label.label_contacts_from_org_with_archived(@organization).collect(&:id).count %>
      <% else %>
        <% count = label.label_contacts_from_org(@organization).collect(&:id).count %>
      <% end %>
      <li class="entry label <%= 'selected_entry' if params[:label].to_i == label.id %>" data-id="<%= label.id %>" style="display:<%= count > 0 ? 'block' : 'none' %>">
        <% if params[:include_archived] %>
          <% link = all_contacts_path(label: label.id, include_archived: 'true') %>
        <% else %>
          <% link = all_contacts_path(label: label.id) %>
        <% end %>
        <%= link_to label, all_contacts_path(label: label.id) %>&nbsp;(<%= count %>)
      </li>
    <% end %>
  </div>
</ul>


<ul class="ac_dropdown_list">
	<li class="ac_dropdown_list_header">
    <a href="#" class="side_toggle arrow_anchor">&#x25B6;</a>
    <%= t('.interaction_types')%>
  </li>
  <div id='interaction_list' class="side_list" style="<%= 'display:block;' if params[:interaction_type].present? %>">
    <% @organization.interaction_types.exclude_comment.each do |interaction_type| %>
      <% if params[:include_archived] %>
        <% count = interaction_type.interaction_receivers_from_org_with_archived(@organization).collect(&:id).count %>
      <% else %>
        <% count = interaction_type.interaction_receivers_from_org(@organization).collect(&:id).count %>
      <% end %>
      <li class="entry interaction <%= 'selected_entry' if params[:interaction_type].to_i == interaction_type.id %>" data-id="<%= interaction_type.id %>" style="display:<%= count > 0 ? 'block' : 'none' %>">
        <% if params[:include_archived] %>
          <% link = all_contacts_path(interaction_type: interaction_type.id, include_archived: 'true') %>
        <% else %>
          <% link = all_contacts_path(interaction_type: interaction_type.id) %>
        <% end %>
        <%= link_to interaction_type.title.humanize.titleize, link %>&nbsp;(<%= count %>)
      </li>
    <% end %>
  </div>
</ul>


<ul class="ac_dropdown_list">
	<li class="ac_dropdown_list_header">
    <a href="#" class="side_toggle arrow_anchor">&#x25B6;</a>
    <%= t('.permissions')%>
  </li>
  <div id='permission_list' class="side_list" style="<%= 'display:block;' if params[:permission].present? %>">
    <% @organization.permissions.arrange_all.each do |permission| %>
      <% if params[:include_archived] %>
        <% count = permission.permission_contacts_from_org_with_archived(@organization).collect(&:id).count %>
      <% else %>
        <% count = permission.permission_contacts_from_org(@organization).collect(&:id).count %>
      <% end %>
      <li class="entry permission <%= 'selected_entry' if params[:permission].to_i == permission.id %>" data-id="<%= permission.id %>" style="display:<%= count > 0 ? 'block' : 'none' %>">
        <% if params[:include_archived] %>
          <% link = all_contacts_path(permission: permission.id, include_archived: 'true') %>
        <% else %>
          <% link = all_contacts_path(permission: permission.id) %>
        <% end %>
        <%= link_to permission, link %>&nbsp;(<%= count %>)
      </li>
    <% end %>
  </div>
</ul>


<ul class="ac_dropdown_list">
	<li class="ac_dropdown_list_header">
    <a href="#" class="side_toggle arrow_anchor">&#x25B6;</a>
    <%= t('.more_options')%>
  </li>
  <div class="side_list" style="<%= 'display:block;' if params[:assigned_to].present? && params[:assigned_to] == 'friends' ||  params[:archived].present? || params[:dnc].present? %>">
    <li class="entry more <%= 'selected_entry' if params[:assigned_to] == 'friends' %>">
      <%= link_to(t('contacts.index.my_friends'), all_contacts_path(assigned_to: 'friends')) %>
      (<%= current_person.contact_friends(current_organization).collect(&:id).count %>)
    </li>
    <li class="entry more <%= 'selected_entry' if params[:archived].present? %>">
      <%= link_to(t('people.index.archived_label'), all_contacts_path(archived: true)) %>
      (<%= current_organization.people.archived(current_organization.id).count %>)
    </li>
    <li class="entry more <%= 'selected_entry' if params[:dnc].present? %>">
      <%= link_to(t('contacts.index.dnc'), all_contacts_path(dnc: true)) %>&nbsp;(<%= @organization.dnc_contacts.count %>)
    </li>
  </div>
</ul>