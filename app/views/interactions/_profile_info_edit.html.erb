<%= form_for(@person, remote: true, html: {id: 'edit_profile_form'}) do |f| %>
  <%= fields_for @person, {validators: {}} do |pf| %>
  	<div class="info_edit info_edit_buttons">
  		<button class="red_accent" id="info_edit_save_button">Save</button>
  		<button class="large_lightgray" id="info_edit_cancel_button" data-person-id="<%= @person.id %>">Cancel</button>
  	</div>

    <% if @person.errors.any? %>
    	<div class="feed_box info_edit" id="profile_errors">
        <% @person.errors.each do |attr, msg| %>
          <div class="error_msg"><%= "#{attr.to_s.split(".").first.humanize} #{msg}" %></div>
        <% end %>
      </div>
    <% end %>
      
  	<div class="feed_box info_edit">

  		<div class="status col_left"><%= t('general.status') %>:</div>
    	<div class="status col_right edit" id="followup_status_div">
        <%- contact_role = @person.contact_role_for_org(current_organization) %>
        <%- followup_status = contact_role.nil? ? "" : contact_role.followup_status %>
        <%= select_tag :followup_status, options_for_select(OrganizationalRole::FOLLOWUP_STATUSES.collect {|s| [t("contacts.statuses.#{s}"), s]}, followup_status), {disabled: contact_role.nil?, include_blank: contact_role.nil?, 'data-person-id' => "#{@person.id}", class: "followup_status_field followup_status_field_edit", style: 'display: none;'} %>
        <div id="followup_status_dropdown" class="custom_dropdown edit" data-current-id="<%= followup_status %>">
          <div class="arrow up">&#x25B2;</div><div class="arrow down">&#x25BC;</div>
          <div id="selected"><%= t("contacts.statuses.#{followup_status}") %></div>
          <div id="togglable">
            <% OrganizationalRole::FOLLOWUP_STATUSES.each do |fs| %>
              <div class="option" data-id="<%= fs %>" data-name="<%= t("contacts.statuses.#{fs}") %>">
                <%= t("contacts.statuses.#{fs}") %>
              </div>
            <% end %>
          </div>
        </div>
    	</div>

  		<div class="gender col_left">
        <label for="person_gender"><%= t('general.gender') %></label>:
      </div>
  		<div class="gender col_right">
  			<%= pf.radio_button :gender, 'Male' %>
        <label for="person_gender_male"><%= t('general.male') %></label>
        &nbsp;&nbsp;&nbsp;&nbsp;
        <%= pf.radio_button :gender, 'Female' %>
        <label for="person_gender_female"><%= t('general.female') %></label>
  		</div>
  	</div>
    
    
    


    
    
    

  	<div class="feed_box info_edit">		
  		<div class="email col_left">
        <label><%= t('general.email') %></label>:
      </div>
  		<div class="email col_right">
        <div id="edit_profile_email_list">
          <%= pf.fields_for :email_addresses do |builder| %>
            <%= render 'interactions/email_address_fields', builder: builder, no_remove: @person.email_addresses.length <= 1 %>
          <% end %>
        </div>
        <div class="add_email" id="edit_profile_add_email_button">
          <a href="#"><button class="add_gray"></button></a>
        </div>
  		</div>

  		<div class="phone col_left">
        <label><%= t('general.phone') %></label>:
      </div>
  		<div class="phone col_right">
        <div id="edit_profile_phone_list">
          <%= pf.fields_for :phone_numbers do |builder| %>
            <%= render 'interactions/phone_number_fields', builder: builder, no_remove: @person.phone_numbers.length <= 1 %>
          <% end %>
        </div>
        <div class="add_phone" id="edit_profile_add_phone_button">
          <a href="#"><button class="add_gray"></button></a>
        </div>
  		</div>

  		<div class="address col_left">
        <label><%= t('general.address') %></label>:
      </div>
  		<div class="address col_right">
        <div id="edit_profile_address_list">
          <%= pf.fields_for :addresses do |builder| %>
            <%= render 'interactions/address_fields', builder: builder %>
          <% end %>
        </div>
        <div class="add_address" id="edit_profile_add_address_button">
          <a href="#"><button class="add_gray"></button></a>
        </div>
  		</div>
  	</div>

  	<div class="feed_box info_edit">
  		<div class="fb_link col_left">Facebook URL:</div>
  		<div class="fb_link col_right">
        <%= text_field_tag :facebook_name_search, "", id: 'facebook_name_search', placeholder: "Type a name or facebook profile url here", autocomplete: "off" %>
  			<%= pf.hidden_field :fb_uid %>
  		</div>
  	</div>
  <% end %>
<% end %>