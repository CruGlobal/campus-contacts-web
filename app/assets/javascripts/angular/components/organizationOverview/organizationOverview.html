<async-content ready="$ctrl.ready">
    <div class="br3 bg-pivot-darker-blue shadow-4 mb-3" ng-class="{'hidden-org': $ctrl.org.visible === false}" ng-if="$ctrl.showOrgNav()">
        <div class="flex items-center justify-between br3 br--top pb3" ng-class="$ctrl.org.visible ? 'bg-pivot-white' : 'bg-pivot-gray-6'">
            <div class="pivot-darker-blue f3 ph3 pt3 " ui-sref="^.ministry.defaultTab({ orgId: $ctrl.org.id })">{{$ctrl.org.name}}</div>
            <div ng-if="$ctrl.editMode">
                <ng-md-icon icon="visibilityOn" ng-if="$ctrl.org.visible"
                            ng-click="$ctrl.toggleVisibility($ctrl.org)"
                            analytics-on="click" analytics-category="Dashboard" analytics-event="Hide Organization">
                </ng-md-icon>
                <ng-md-icon icon="visibilityOff" ng-if="!$ctrl.org.visible"
                            ng-click="$ctrl.toggleVisibility($ctrl.org)"
                            analytics-on="click" analytics-category="Dashboard" analytics-event="Show Organization">
                </ng-md-icon>
                <ng-md-icon class="sort-orgs-handle" icon="dragHandle">
                </ng-md-icon>
            </div>
        </div>

        <div class="tabs">
            <div class="tab pivot-white"
                ng-repeat="tabName in $ctrl.tabNames" ui-sref-active="active"
                ui-state="'^.ministry.' + tabName" ui-state-params="{ orgId: $ctrl.org.id }"
                ng-if="tabName !== 'labels'"
            >
                <span>
                    {{'ministries.' + tabName + '.header' | t}}
                    <span ng-if="$ctrl[tabName] && $ctrl[tabName] !== 'countHidden'">({{$ctrl[tabName].length}})</span>
                </span>
                <loading-spinner ng-if="$ctrl.loadDetails && !$ctrl[tabName]" class="loading" size="16">
                </loading-spinner>
            </div>
            <div class="tab dropdown " ng-if="$ctrl.directAdminPrivileges">
                <span class='pivot-white'>{{'ministries.tools.header' | t}}</span>
                <ng-md-icon icon="play_arrow" class="chevron fill-pivot-white" size="14"></ng-md-icon>
                <div class="dropdown-container">
                    <ul class="dropdown-content br3 br--bottom shadow-5 overflow-hidden">
                        <li>
                            <a ui-sref="app.ministries.ministry.import({ orgId: $ctrl.org.id })">{{ 'contacts.index.import_contacts' | t }}</a>
                        </li>
                        <li>
                            <a ui-state="'^.ministry.management'" ui-state-params="{ orgId: $ctrl.org.id }">{{ 'nav.manage' | t }}</a>
                        </li>
                        <li>
                            <a ui-state="'^.ministry.labels'" ui-state-params="{ orgId: $ctrl.org.id }" ui-sref-active="active">{{ 'people.index.manage_labels' | t }}</a>
                        </li>
                        <li>
                            <a ui-state="'^.ministry.cleanup'" ui-state-params="{ orgId: $ctrl.org.id }">{{ 'nav.cleanup' | t }}</a>
                        </li>
                        <li ng-if="$ctrl.org.reports_movement_indicators">
                            <a ui-state="'^.ministry.reportMovementIndicators'" ui-state-params="{ orgId: $ctrl.org.id }">
                                {{ 'nav.report_movement_indicators' | t }}
                            </a>
                        </li>
                        <li ng-if="$ctrl.p2cOrg">
                            <a ui-state="'^.ministry.signatures'" ui-state-params="{ orgId: $ctrl.org.id }" ui-sref-active="active">{{ 'signatures.title' | t }}</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="pivot_theme" ng-if="!('app.ministries.root' | isState)">
            <ui-view class="grid"></ui-view>
        </div>
    </div>

    <div class="pivot_theme" ng-if="!('app.ministries.root' | isState) && !$ctrl.showOrgNav()">
        <ui-view class="grid"></ui-view>
    </div>
</async-content>
