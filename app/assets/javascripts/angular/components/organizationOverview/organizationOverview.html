<async-content ready="$ctrl.ready">
    <div class="header" ng-class="{'hidden-org': $ctrl.org.visible === false}" ng-if="$ctrl.showOrgNav()">
        <div class="org-title-row">
            <div class="org-name" ui-sref="^.ministry.defaultTab({ orgId: $ctrl.org.id })">{{$ctrl.org.name}}</div>
            <div ng-if="$ctrl.editMode">
                <ng-md-icon icon="visibilityOn" ng-if="$ctrl.org.visible"
                            ng-click="$ctrl.toggleVisibility($ctrl.org)"
                            analytics-on="click" analytics-category="Dashboard" analytics-event="Hide Organization">
                </ng-md-icon>
                <ng-md-icon icon="visibilityOff" ng-if="!$ctrl.org.visible"
                            ng-click="$ctrl.toggleVisibility($ctrl.org)"
                            analytics-on="click" analytics-category="Dashboard" analytics-event="Show Organization">
                </ng-md-icon>
                <ng-md-icon class="sort-orgs-handle" icon="dragHandle">
                </ng-md-icon>
            </div>
        </div>

        <div class="tabs">
            <div class="tab"
                ng-repeat="tabName in $ctrl.tabNames" ui-sref-active="active"
                ui-state="'^.ministry.' + tabName" ui-state-params="{ orgId: $ctrl.org.id }"
                ng-if="tabName !== 'labels'"
            >
                <span>
                    {{'ministries.' + tabName + '.header' | t}}
                    <span ng-if="$ctrl[tabName] && $ctrl[tabName] !== 'countHidden'">({{$ctrl[tabName].length}})</span>
                </span>
                <loading-spinner ng-if="$ctrl.loadDetails && !$ctrl[tabName]" class="loading" size="16">
                </loading-spinner>
            </div>
            <div class="tab dropdown" ng-if="$ctrl.directAdminPrivileges">
                {{'ministries.tools.header' | t}}
                <ng-md-icon icon="play_arrow" class="chevron" size="14"></ng-md-icon>
                <div class="dropdown-container">
                    <ul class="dropdown-content">
                        <li>
                            <a ui-sref="app.ministries.ministry.import({ orgId: $ctrl.org.id })">{{ 'contacts.index.import_contacts' | t }}</a>
                        </li>
                        <li>
                            <a ui-state="'^.ministry.management'" ui-state-params="{ orgId: $ctrl.org.id }">{{ 'nav.manage' | t }}</a>
                        </li>
                        <li>
                            <a ui-state="'^.ministry.labels'" ui-state-params="{ orgId: $ctrl.org.id }" ui-sref-active="active">{{ 'people.index.manage_labels' | t }}</a>
                        </li>
                        <li>
                            <a ng-href="/organizations/cleanup?organization_id={{$ctrl.org.id}}">{{ 'nav.cleanup' | t }}</a>
                        </li>
                        <li ng-if="$ctrl.org.reports_movement_indicators">
                            <a ui-state="'^.ministry.reportMovementIndicators'" ui-state-params="{ orgId: $ctrl.org.id }">
                                {{ 'nav.report_movement_indicators' | t }}
                            </a>
                        </li>
                        <li ng-if="$ctrl.p2cOrg">
                            <a ng-href="/organizations/signatures?organization_id={{$ctrl.org.id}}">
                                {{ 'signatures.title' | t }}
                            </a>
                        </li>
                        <li class="divider">
                            <a ng-click="$ctrl.showWarning('/charts/snapshot?organization_id={{$ctrl.org.id}}')">{{ 'nav.snapshot' | t }}</a>
                        </li>
                        <li>
                            <a ng-click="$ctrl.showWarning('/charts/goal?organization_id={{$ctrl.org.id}}')">{{ 'nav.goal' | t }}</a>
                        </li>
                        <li>
                            <a ng-click="$ctrl.showWarning('/charts/trend?organization_id={{$ctrl.org.id}}')">{{ 'nav.trend' | t }}</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="pivot_theme" ng-if="!('app.ministries.root' | isState)">
        <ui-view class="grid"></ui-view>
    </div>
</async-content>
