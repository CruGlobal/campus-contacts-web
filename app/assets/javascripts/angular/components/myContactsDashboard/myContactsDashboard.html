<div class="my-contacts-dashboard" ui-sortable="$ctrl.sortableOptions" ng-model="$ctrl.organizationPeople">
  <h1 ng-show="$ctrl.loading" ng-click="$ctrl.retry">{{'dashboard.loading_contacts' | t}}</h1>
  <div ng-if="$ctrl.noContacts" class="no-contacts-message ng-cloak">
    <h1>{{ $ctrl.noContactsWelcome }}</h1>
    <p bind-dynamic="'dashboard.no_contacts_help' | t"></p>
  </div>
  <organization
        ng-repeat="org in $ctrl.organizationPeople | limitTo : $ctrl.numberOfOrgsToShow track by org.id"
        ng-if="org.visible || $ctrl.editMode"
        org="org" edit-mode="$ctrl.editMode" collapsible="$ctrl.collapsible"
        options="{ anonymousInteractions: true, reorderable: true }">
      <div class="people-list" ng-if="!$ctrl.editMode">
        <unassigned-contacts></unassigned-contacts>
        <person person="person" organization-id="org.id"
                ng-repeat="person in org.people | orderBy: 'last_name' track by person.id"
                ng-class="{'alternate-color': $odd}">
        </person>
      </div>
  </organization>
  <div class="no-contacts-extras" ng-if="$ctrl.numberOfOrgsToShow == $ctrl.noPeopleShowLimit">
    <a href ng-click="$ctrl.numberOfOrgsToShow = 100" class="show-more" bind-dynamic="'dashboard.show_more' | t"></a>
    <br>
    <a href ng-click="$ctrl.editMode = true" class="edit-mode" bind-dynamic="'dashboard.edit_org_order_help' | t"></a>
  </div>
</div>
